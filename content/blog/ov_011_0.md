---
title: "ov v0.11.0"
tags: ["ov"]
categories: ["ov"]
date: 2022-05-21T08:39:02+09:00
---

## ov v0.11.0をリリースしました

Terminal PAGER [releases ov v0.11.0](https://github.com/noborus/ov/releases/tag/v0.11.0)

### セクションの概念を追加

対象の文書を`--section-delimiter`で区切り文字を指定することにより、セクションとして扱えるようになりました。

`--section-delimiter`の区切り文字は正規表現で指定できます。改行は含まれませんので、`^$`は空行を指定したことになります。
その場合空行毎に違うセクションになります。

ページャーは通常、内容に関係なく画面サイズにより次のページの表示を決めていますが、セクションを利用することにより意味のある単位で移動できます。

デフォルトでは、次のセクションに移動するのは[スペース]キー、前のセクションに移動するのは[^]キーです。最後のセクションに移動は[9]キーです。

![ov-section](/ov/ov-section.gif)

空行を指定した場合は、セクション移動時に最初の行が空行になってしまいます。これを調整するために`--section-start`も追加しました。`--section-start 1`を指定することにより、`--section-delimiter`の次の行から表示できます。

起動オプションだけでなく、起動後も`--section-delimiter`は[alt+d]、`--section-start`は[alt+s]で指定できます。

### follow-sectionを追加

`--follow-section`オプションを追加しました。`section-delimiter`で指定した区切り文字単位で、内容が更新されたときに最後のセクションを表示します。 follow-sectionを利用することにより、**PostgreSQL version 15**で追加される psqlのwatchのページャー（`PSQL_WATCH_PAGER`）として使用できるようになります。

```env
PSQL_WATCH_PAGER 'ov --follow-section --section-delimiter "^$"'
```

![watch](/ov/psql-watch.gif)

### Watchは追記するように変更

`--watch`は指定した時間毎にファイルを再読込していましたが、前の内容を消さずに再読込をした内容を追記するように変更しました。
このときEOFに到達するとEOFを'\f'に置き換えて追記します。

さらにWatchモードは自動で'\f'を`section-delimiter`として、最終セクションを表示するようになりました。

つまり、`--watch`で最後に実行された内容が表示され続けるのは変わりませんが、Watchモードを止めて上にスクロールすると履歴が見られます。

Watchモードはファイルの定期再読込に加えて`section-delimiter`と`follow-section`を自動で設定したモードです。

### 過去のバージョン

* v0.11.0 sectionの概念を追加
* v0.10.0 reload,watchを追加
* v0.9.6 リダイレクト出力、列モードの修正
* v0.9.5 サスペンド／レジュームのサポート
* v0.9.4 マーク機能の強化、インクリメンタルサーチを追加して検索強化。
* v0.9.3 スキップ行オプションの追加
* v0.9.2 主要モジュール更新版
* v0.9.1 半画面下移動のバグ修正。goのバージョンを1.16以降へ変更。
* v0.9.0 follow,follow-all,execの各モードを追加、改善。検索とカラム選択のスタイルカスタマイズを可能にしました。
* v0.8.9 (pre)follow-mode,follow-all-modeの追加
* v0.8.1 文字の単位をCode point から Grapheme clusterに変更しました。
* v0.8.0 tcell v2にアップグレードしました。
* v0.7.1 交互に行スタイル効果適用の行がズレていたので修正
* v0.7.0 スタイルカスタマイズの改善
* v0.6.2 検索の高速化とキャンセル処理の追加
* v0.6.1 細かな修正バージョン
* v0.6.0 マウスサポート
* v0.5.0 複数のドキュメントを開く方法を変更
* v0.4.0 ヘルプ画面を追加
* v0.3.1 位置をマークする機能を追加
* v0.3.0 入力の改善
* v0.2.1 色をカスタマイズ可能にする
* v0.2.0 検索の改善
* v0.1.3 行番号モードを追加
* v0.1.2 Homebrewパッケージの追加
* v0.1.1 パッケージ自動更新の調整
* v0.1.0 ovにレポジトリ名と構成を変更。deb/rpmパッケージの追加
* v0.0.5 現在の基本機能を備えた最初のバージョン

## 参考

[ovの紹介](../oviewer)
